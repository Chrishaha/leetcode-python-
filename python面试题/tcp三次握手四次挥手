https://github.com/taizilongxu/interview_python#1-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B

tcp是传输控制协议
syn 叫 同步序列号 是tcp协议中的一个标志位 如果该标志位为1  表示这是一个请求连接的报文
ack也是该协议中的一个标志位 如果该标志位为1  表示这是一个用于确认的报文


三次握手

客户端通过向服务器发送一个syn来请求建立连接 服务器应当为一个合法的syn发送一个确认号ack
然后客户端接收到ack后再次向服务器发送一个ack 此时三次握手完成 进行创建状态。

四次挥手

中断连接端可以是客户端也可以是服务器端
客户端在想结束连接时 发送一个带有Fin=1的数据  此时客户端进入fin-wait 状态 此状态下客户端只能接受信息
不能发送信息  服务器端收到后 发送一个ack=1 以及剩下的数据 然后继续发送数据直到发完 发完后服务器端发送
一个带有fin=1的数据 并进入wait-close状态 客户端收到后返回带有ack=1的报文确认 为了防止服务器未收到需要
重发 进入time-wait状态 服务器收到后关闭连接 客户端则在等待2msl后未收到服务器消息就关闭


两个标志位 syn请求连接标志位 ack确认标志位
三个状态  fin-wait wait-close time-wait

问题一  为什么建立连接时进行三次握手 切断连接时需要四次挥手

因为建立连接时 客户端向服务器端发送带有syn=1的数据包表示请求建立连接 服务器收到后可以直接给其发送syn+ack
数据包 其中syn是用来同步的  ack是用来确认的  然后客户端给服务器发送一个ack=1的数据包即可
但是结束连接时 客户端发送带有fin=1的数据包 自己进入等待关闭状态 服务器收到后很可能由于数据没有发送完  只能
先给客户端发送一个ack=1的数据包表示已经收到了  然后服务器端继续发送数据 等待数据发送完后 给客户端发送fin=1的
数据包表示也可以关闭了 然后等待客户端发送一个ack=1的确认包 客户端等着服务器没有会用就关闭 服务器收到后关闭。

问题二 为什么time-wait状态需要等到2msl ？  最大报文生存时间

因为当切断连接时 最后一次客户端发送给服务器端的ack=1的数据包 有可能丢失 这个时间就是用来等待重发可能丢失的报文的。
